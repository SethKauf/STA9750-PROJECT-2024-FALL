[
  {
    "objectID": "Seth_Individual_Report.html",
    "href": "Seth_Individual_Report.html",
    "title": "Seth Individual Report",
    "section": "",
    "text": "Introduction\nFor Metro Mindset’s group project, I researched, wrote and analyzed ridership in NYC, specifically looking at the decline in MTA Ridership and potentially the increase in other forms of transportation as a reason for the Subway’s struggle in returning to pre-pandemic ridership numbers.\nBelow are various code snippets that can be unfolded to follow along in an R terminal, however the data is not staged in R.\nQuickly about the DMV and U.S. Census Data:\nThe data comes from two sources:\n\nvehicle_regs.csv comes directly from the New York DMV through Data.NY.GOV\n\nThe specific place is the Vehicle, Snowbile, and Boat Registrations Dataset\nThis dataset is continuously updated, meaning the data you pull today will be different than what I initially pulled back in October.\nThis dataset contains as of writing 12.6M records.\n\nVehicle_Registrations_By_Boro.xlsx was created by combining U.S. Census Data for Vehicle Ownership in NYC for each year into a single Excel file.\n\n\n\nCode\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"DT\")) install.packages(\"DT\")\nif (!require(\"ggplot2\")) install.packages(\"ggplot2\")\nif (!require(\"ggrepel\")) install.packages(\"ggrepel\")\nif (!require(\"glue\")) install.packages(\"glue\")\nif (!require(\"lubridate\")) install.packages(\"lubridate\")\nif (!require(\"plotly\")) install.packages(\"plotly\")\nif (!require(\"psych\")) install.packages(\"psych\")\nif (!require(\"readr\")) install.packages(\"readr\")\nif (!require(\"scales\")) install.packages(\"scales\")\nif (!require(\"tidyverse\")) install.packages(\"tidyverse\")\n\nlibrary(dplyr)\nlibrary(DT)\nlibrary(ggplot2)\nlibrary(ggrepel)\nlibrary(glue)\nlibrary(lubridate)\nlibrary(plotly)\nlibrary(psych)\nlibrary(readr)\nlibrary(scales)\nlibrary(tidyverse)\n\n\nFirst a look at the problem: let’s see how ridership and the MTA’s revenue from the Subway have fared over the past several years.\n\n\nCode\ndf &lt;- readxl::read_xlsx(\"data/ridership_costs_summary_stats.xlsx\")\n\nggplot(df, aes(x = Year)) +\n  # plotting the different lines of ridership and $ in a way that pops out\n  geom_line(aes(y = Yearly_Subway_Ridership / 1e9, color = \"Subway Ridership\"), size = 1.5) +\n  geom_point(aes(y = Yearly_Subway_Ridership / 1e9, color = \"Subway Ridership\"), size = 2) +\n  \n  geom_line(aes(y = MTA_Subway_Total_Revenue / 1e9, color = \"Revenue\"), size = 1) +\n  geom_point(aes(y = MTA_Subway_Total_Revenue / 1e9, color = \"Revenue\"), size = 2) +\n  \n  geom_line(aes(y = (MTA_Subway_Total_Expenses * -1) / 1e9, color = \"Expenses\"), size = 1) +\n  geom_point(aes(y = (MTA_Subway_Total_Expenses * -1) / 1e9, color = \"Expenses\"), size = 2) +\n  \n  geom_line(aes(y = Revenue_Less_Expenses / 1e9, color = \"Revenue Less Expenses\"), size = 1) +\n  geom_point(aes(y = Revenue_Less_Expenses / 1e9, color = \"Revenue Less Expenses\"), size = 2) +\n  \n  geom_vline(xintercept = c(2017, 2020, 2023), linetype = \"dashed\", color = \"grey\") +\n  \n  # Centered bar at y = 0\n  geom_hline(yintercept = 0, linetype = \"solid\", color = \"black\", size = 1.2) +\n  \n  geom_text(data = df[df$Year %in% c(2017, 2020, 2023), ],\n            aes(y = Yearly_Subway_Ridership / 1e9, label = paste0(round(Yearly_Subway_Ridership / 1e9, 1), \"B\")),\n            color = \"darkblue\", hjust = -0.2, vjust = 1.5, size = 3.5) +\n  \n  geom_text(data = df[df$Year %in% c(2017, 2020, 2023), ],\n            aes(y = MTA_Subway_Total_Revenue / 1e9, label = scales::dollar(MTA_Subway_Total_Revenue, scale = 1e-9, suffix = \"B\")),\n            color = \"darkgreen\", hjust = -0.2, vjust = -0.5, size = 3.5) +\n  \n  geom_text(data = df[df$Year %in% c(2017, 2020, 2023), ],\n            aes(y = (MTA_Subway_Total_Expenses * -1) / 1e9, label = scales::dollar((MTA_Subway_Total_Expenses * -1), scale = 1e-9, suffix = \"B\")),\n            color = \"darkred\", hjust = -0.2, vjust = -0.5, size = 3.5) +\n  \n  geom_text(data = df[df$Year %in% c(2017, 2020, 2023), ],\n            aes(y = Revenue_Less_Expenses / 1e9, label = scales::dollar(Revenue_Less_Expenses, scale = 1e-9, suffix = \"B\")),\n            color = \"darkorange\", hjust = -0.2, vjust = -0.5, size = 3.5) +\n  \n  # Axis settings\n  scale_x_continuous(\n    breaks = seq(2017, 2023, 1),\n    limits = c(2016.5, 2023.5)\n  ) +\n  scale_y_continuous(\n    labels = label_number(suffix = \"B\", accuracy = 0.1),\n    sec.axis = sec_axis(~ . * 1, labels = label_number(suffix = \"B\", accuracy = 0.1))\n  ) +\n  \n  scale_color_manual(\n    name = \"Legend\",\n    values = c(\n      \"Subway Ridership\" = \"#8be8eb\",\n      \"Revenue\" = \"darkgreen\",\n      \"Expenses\" = \"darkred\",\n      \"Revenue Less Expenses\" = \"#f5ab20\"\n    ),\n    breaks = c(\"Subway Ridership\", \"Revenue\", \"Expenses\", \"Revenue Less Expenses\")\n  ) +\n\n  labs(\n    x = NULL,  \n    y = NULL,\n    title = \"MTA Subway Ridership and Revenue\\n2017-2023\"\n  ) +\n  \n  theme_minimal() +\n  theme(\n    plot.background = element_rect(fill = \"gray95\"),  \n    panel.background = element_rect(fill = \"gray95\", color = NA),  \n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),  \n    axis.text.y.left = element_text(angle = 45, hjust = 1),\n    axis.text.y.right = element_text(angle = 45),\n    legend.position = \"right\",\n    panel.grid.major = element_line(color = \"gray30\", size = 0.25),\n    panel.grid.minor = element_line(color = \"gray30\", size = 0.1)\n  )\n\n\n\n\n\n\n\n\n\nThat 2020 dip has hurt a lot. Ridership is still quite low compared to pre-pandemic. The Office of the NY State Comptroller estimates that it will eventually return to pre-pandemic levels, but that won’t happen for quite sometime.\n\nWith this in mind, let’s look at how other forms of transit that could’ve overtaken the Subways are going.\n\n\nCode\n# read in data from cars csv\ncars &lt;- read_csv(\"data/vehicle_regs.csv\")\n\n# filter cars on Vehicles, check only for counties in NYC\n# select only cols we want and rename them to something more useful for our purposes\ncars &lt;- cars |&gt;\n  filter(\n    `Record Type` == \"VEH\",\n    `County` %in% c(\"KINGS\", \"QUEENS\", \"BRONX\", \"NEW YORK\")\n  ) |&gt;\n  select(\n    class = `Registration Class`,\n    city = `City`,\n    state = `State`,\n    zip = `Zip`,\n    county = `County`,\n    mdlYear = `Model Year`,\n    make = `Make`,\n    bodyType = `Body Type`,\n    fuelType = `Fuel Type`,\n    unlWeight = `Unladen Weight`,\n    maxGrossWeight = `Maximum Gross Weight`,\n    passengers = `Passengers`,\n    regDate = `Reg Valid Date`,\n    regExpDate = `Reg Expiration Date`,\n    color = `Color`,\n    scfwInd = `Scofflaw Indicator`,\n    spsInd = `Suspension Indicator`,\n    revInd = `Revocation Indicator`\n  ) |&gt;\n  filter(!is.na(regDate)) |&gt;\n  mutate(\n    Reg_Date = as.Date(regDate, format = \"%m/%d/%Y\"),\n    year = year(Reg_Date)\n  ) |&gt;\n  filter(class %in% c(\"PAS\", \"OMT\", \"MOT\")) # Passenger, Omnibus Taxi, Motorcycle\n\n# creating a dt just to view the 100 random records\ncars |&gt;\n  mutate(\n    city = str_to_title(city),\n    county = str_to_title(county)\n  ) |&gt;\n  select(\n    `Class` = class,\n    `City` = city,\n    `County` = county,\n    `Model Year` = mdlYear,\n    `Make` = make,\n    `Registration Date` = regDate,\n    `Registration Expiration Date` = regExpDate\n  ) |&gt;\n  slice_sample(\n    n=100\n    ) |&gt;\n  DT::datatable()\n\n\n\n\n\n\nThis is a quick look at the cars table, though with only 100 of the ~1.7M records.\n\n\nCode\n# registration per county per year\nsummary_table &lt;- cars |&gt;\n  group_by(county, year) |&gt;\n  summarise(\n    Reg_Count = n(), # Count of records for each county-year group\n    Avg_Mdl_Year = mean(mdlYear, na.rm = TRUE), # Average mdlYear, excluding NULLs\n    Ct_Pas = sum(class == \"PAS\", na.rm = TRUE), # Count where class is \"PAS\"\n    Ct_Omt = sum(class == \"OMT\", na.rm = TRUE), # Count where class is \"OMT\"\n    Ct_Mot = sum(class == \"MOT\", na.rm = TRUE) # Count where class is \"MOT\"\n  ) |&gt;\n  ungroup()\n\n# creating as its own var\ncar_registration_plot_data &lt;- cars |&gt;\n  filter(\n    year &gt;= 2014\n  ) |&gt;\n  group_by(county, year) |&gt;\n  summarize(registration_count = n(), .groups = \"drop\") # Count registrations by county and year\n\n# Create the line plot for Vehicle Registration by County\nggplot(car_registration_plot_data, aes(x = year, y = registration_count, color = county, group = county)) +\n  geom_line(linewidth = 2) +\n  scale_y_continuous(labels = comma) + # Remove scientific notation\n  labs(\n    title = \"Vehicle Registrations by County per Year (2014-2024)\",\n    x = \"Year\",\n    y = \"Count of Vehicle Registrations\"\n  ) +\n  theme_minimal() +\n  theme(legend.title = element_blank(),\n        plot.background = element_rect(fill = \"gray95\"),\n        panel.background = element_rect(fill = \"gray95\", color = NA))\n\n\n\n\n\n\n\n\n\nA major problem with this data was that it updates and removes old registrations.\nThis means most registrations from before mid-2021 have expired and therefore been removed from the table.\nBecause of this, I used US Census data to look at vehicle registrations, which had a more complete 10-year lookback.\n\n\nCode\n#### Car Regs -- US Census\n# Using Census Data\nregs &lt;- readxl::read_xlsx(\"data/Vehicle_Registrations_By_Boro.xlsx\", sheet = \"Data\")\n\n# Only want in 4 boros (sorry SI)\nfiltered_regs &lt;- regs |&gt;\n  filter(Label %in% c(\"BRONX\", \"KINGS\", \"NEW YORK\", \"QUEENS\"))\n\n\n# Occupied Homes by County\nggplot(filtered_regs, aes(x = Year, y = OCC_T, fill = Label)) +\n  geom_bar(stat = \"identity\") +\n  labs(x = \"Year\", y = \"Occupied Count\", title = \"Number of Occupied Homes per Year by County\") +\n  theme_minimal() +\n  theme(\n    plot.background = element_rect(fill = \"gray95\"),\n    panel.background = element_rect(fill = \"gray95\", color = NA),\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\"),\n    scale_fill_brewer(palette = \"Set2\")\n  ) +\n  scale_y_continuous(labels = scales::comma) +\n  scale_x_continuous(breaks = seq(min(regs$Year), max(regs$Year), by = 1))\n\n\n\n\n\n\n\n\n\nReading in the U.S. Census Data, first we can see how home occupancies have grown in NYC over the past few years.\n\n\nCode\n# pivot registration table\n# make the year the columns and county the Label/Index\nregs_pivot &lt;- regs |&gt;\n  select(\n    Label,\n    Year,\n    V_H\n  ) |&gt;\n  pivot_wider(\n    names_from = Year,\n    values_from = V_H\n  )\n\n# put data back in a more useable format\nregs_tidy &lt;- regs_pivot |&gt;\n  pivot_longer(\n    cols = -Label,\n    names_to = \"Year\",\n    values_to = \"Value\"\n  ) |&gt;\n  mutate(Year = as.numeric(Year)) # Ensure Year is numeric for plotting\n\n\n# Filter for the counties of interest and reshape the data for plotting\nregs_tidy_filtered &lt;- regs_tidy |&gt;\n  filter(Label %in% c(\"BRONX\", \"KINGS\", \"NEW YORK\", \"QUEENS\"))\n\n\n# Get registration peak and valley for each borough\nregs_high_low &lt;- regs_tidy_filtered |&gt;\n  group_by(Label) |&gt;\n  summarize(\n    High_Year = Year[which.max(Value)],\n    High_Value = max(Value),\n    Low_Year = Year[which.min(Value)],\n    Low_Value = min(Value)\n  )\n\n# Merge high and low points back into the tidy dataset for annotations\nregs_tidy_filtered &lt;- regs_tidy_filtered |&gt;\n  left_join(regs_high_low, by = \"Label\")\n\n# Vehicle Registrations by County\nggplot(regs_tidy_filtered, aes(x = Year, y = Value, fill = Label)) +\n  geom_bar(stat = \"identity\") + # stat=\"identity\" tells ggplot to use the actual data\n  labs(\n    title = \"Vehicle Registrations by County\",\n    x = \"Year\",\n    y = \"Registrations\",\n    fill = \"County\"\n  ) +\n  theme_minimal() +\n  scale_y_continuous(labels = comma) +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    plot.background = element_rect(fill = \"gray95\"),\n    panel.background = element_rect(fill = \"gray95\", color = NA)\n  )\n\n\n\n\n\n\n\n\n\nWe see from the Census data that vehicle ownership hasn’t really risen too much.\nLet’s see if we can find some other way to visualize that.\n\n\nCode\n# making a quick linear model to try and find the\n# line of best fit for registrations\nlm_model &lt;- lm(Value ~ Year, data = regs_tidy_filtered)\nslope &lt;- coef(lm_model)[\"Year\"]\nintercept &lt;- coef(lm_model)[\"(Intercept)\"]\n\n# Create a formatted trendline equation\ntrend_eq &lt;- paste0(\"TREND: y = \", round(slope, 2), \"x + \", round(intercept, 2))\n\n# Calculate Pearson correlation\ncorrelation &lt;- cor(regs_tidy_filtered$Year, regs_tidy_filtered$Value)\ncor_label &lt;- paste0(\"TREND: \", round(correlation, 2))\n\n# Plot with correlation in the legend\nggplot(regs_tidy_filtered, aes(x = Year, y = Value, color = Label, group = Label)) +\n  geom_line(size = 1) +\n  geom_point() +\n\n  # Highlight high and low points\n  geom_point(aes(x = High_Year, y = High_Value), color = \"#00BFC4\", size = 3, shape = 17) +\n  geom_text(aes(x = High_Year, y = High_Value, label = paste0(\"High: \", comma(High_Value))),\n    vjust = -1, color = \"#00BFC4\", size = 3\n  ) +\n  geom_point(aes(x = Low_Year, y = Low_Value), color = \"#F8766D\", size = 3, shape = 17) +\n  geom_text(aes(x = Low_Year, y = Low_Value, label = paste0(\"Low: \", comma(Low_Value))),\n    vjust = 1.5, color = \"#F8766D\", size = 3\n  ) +\n\n  # Add a linear regression trendline (overall trend)\n  geom_smooth(\n    method = \"lm\", se = FALSE, aes(group = 1, color = cor_label),\n    linetype = \"dashed\", size = 1\n  ) +\n\n  # Add the correlation call-out near the trendline\n  annotate(\"text\",\n    x = 2020.25,\n    y = predict(lm_model, newdata = data.frame(Year = 2021)) + 10000,\n    label = paste0(\"r = \", round(correlation, 2)),\n    color = \"black\",\n    size = 4\n  ) +\n  labs(\n    x = \"Year\",\n    y = \"Registered Vehicles in NYC\",\n    color = \"County/State\"\n  ) +\n  scale_y_continuous(labels = comma) +\n  scale_x_continuous(breaks = seq(2017, 2023, by = 1)) +\n  coord_cartesian(clip = \"off\") +\n  theme_minimal() +\n  theme(\n    plot.background = element_rect(fill = \"gray95\"),\n    panel.background = element_rect(fill = \"gray95\", color = NA),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    plot.margin = margin(10, 10, 10, 10)\n  ) +\n  ggtitle(\"Vehicle Registrations Over Time\") +\n  theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\n\n\n\nSo, vehicle ownership hasn’t grown a ton (though it has generally very slightly gone up), but this doesn’t really explain what might be going on.\nSo let’s look at bike ridership, NYC Open Data provides a source of Bicycle Counts at various locations around the city. The data I’m viewing is from November, so results might differ.\n\n\nCode\nbike_data &lt;- read_csv(\"data/Bicycle_Counts_20241106.csv\")\n\n# format is a bit busted so this fixes it\nbike_data$date &lt;- as.POSIXct(bike_data$date, format = \"%m/%d/%Y %I:%M:%S %p\")\n\nbike_data_filtered &lt;- bike_data |&gt;\n  filter(status %in% c(4, 8, 16)) |&gt;\n  mutate(year = year(date)) |&gt;\n  filter(year &gt;= 2017 & year &lt;= 2023) \n\nyearly_counts &lt;- bike_data_filtered |&gt;\n  group_by(year) |&gt;\n  summarize(total_counts = sum(counts, na.rm = TRUE))\n\n\nggplot(yearly_counts, aes(x = year, y = total_counts)) +\n  geom_line(color = \"blue\", size = 1) +\n  geom_point(color = \"darkblue\", size = 3) +\n  scale_y_continuous(labels = scales::comma) +\n  labs(\n    title = \"NYC Bike Counts (Status: Modified, Validated, Certified)\\n\",\n    subtitle = \"Yearly Bike Volume from 2017 to 2023\",\n    x = \"Year\",\n    y = \"Total Bike Volume\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.background = element_rect(fill = \"gray95\"),\n    panel.background = element_rect(fill = \"gray95\", color = NA)\n  )\n\n\n\n\n\n\n\n\n\nThis doesn’t seem to really explain why ridership is down either.\nThere are several theories for what might be causing the slow return-to-form.\nThe newspaper The City believes that with remote work up and tourism down, for example, that the Subway system will continue to be underutilized."
  },
  {
    "objectID": "MetroMindset_GroupProject.html",
    "href": "MetroMindset_GroupProject.html",
    "title": "Metro Mindset",
    "section": "",
    "text": "The group at Metro Mindset consists of five New Yorkers who frequently use the MTA Subway system."
  },
  {
    "objectID": "MetroMindset_GroupProject.html#revenue-change-over-time",
    "href": "MetroMindset_GroupProject.html#revenue-change-over-time",
    "title": "Metro Mindset",
    "section": "Revenue Change Over Time",
    "text": "Revenue Change Over Time"
  },
  {
    "objectID": "MetroMindset_GroupProject.html#other-system-comparison",
    "href": "MetroMindset_GroupProject.html#other-system-comparison",
    "title": "Metro Mindset",
    "section": "Other System Comparison",
    "text": "Other System Comparison"
  },
  {
    "objectID": "MetroMindset_GroupProject.html#accessibility",
    "href": "MetroMindset_GroupProject.html#accessibility",
    "title": "Metro Mindset",
    "section": "Accessibility",
    "text": "Accessibility"
  },
  {
    "objectID": "MetroMindset_GroupProject.html#crime-safety",
    "href": "MetroMindset_GroupProject.html#crime-safety",
    "title": "Metro Mindset",
    "section": "Crime & Safety",
    "text": "Crime & Safety"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Metro Mindset",
    "section": "",
    "text": "The group at Metro Mindset consists of five New Yorkers who frequently use the MTA Subway system.\nThe MTA has been through it over the years, and especially with the COVID pandemic in 2020 where ridership plummeted.\n\nAs concerned New Yorkers we ask, how is this Subway system we rely on doing?"
  },
  {
    "objectID": "index.html#revenue-change-over-time",
    "href": "index.html#revenue-change-over-time",
    "title": "Metro Mindset",
    "section": "Revenue Change Over Time",
    "text": "Revenue Change Over Time"
  },
  {
    "objectID": "index.html#other-system-comparison",
    "href": "index.html#other-system-comparison",
    "title": "Metro Mindset",
    "section": "Other System Comparison",
    "text": "Other System Comparison"
  },
  {
    "objectID": "index.html#accessibility",
    "href": "index.html#accessibility",
    "title": "Metro Mindset",
    "section": "Accessibility",
    "text": "Accessibility"
  },
  {
    "objectID": "index.html#crime-safety",
    "href": "index.html#crime-safety",
    "title": "Metro Mindset",
    "section": "Crime & Safety",
    "text": "Crime & Safety\nArrests for Offenses Described in Administrative Code 14-150(d) Occurring in Transit Jurisdiction"
  },
  {
    "objectID": "index.html#ridership-over-time",
    "href": "index.html#ridership-over-time",
    "title": "Metro Mindset",
    "section": "Ridership over time",
    "text": "Ridership over time\n\nLooking at ridership over time, we see the sharp drop in ridership (and revenue) in 2020, which started at the outset of the COVID lockdowns in March 2020.\nExpenses is “inverted”, it should be noted that when it says, for example, \\(-\\$3.3B\\), that means the expenses are $3.3Billion for that year.\nAlthough ridership (and by extent, revenue) are growing and are projected to reach an under-19% difference from 2019’s figures by 2028 per the Office of the New York State Comptroller, it still will have a way to go to recover to pre-pandemic levels of ridership. \nIt is interesting to note that home occupied homes have actually grown in this time period:\n\nSo, while more units are becoming occupied in the city, Subway travel is still quite down."
  },
  {
    "objectID": "index.html#other-modes-of-transit",
    "href": "index.html#other-modes-of-transit",
    "title": "Metro Mindset",
    "section": "Other modes of transit",
    "text": "Other modes of transit\nBecause of this decline in ridership combined with an uptick in living here, we looked at how other forms of transit have done in NYC since COVID, specifically vehicle ownership and bike travel.\nThe working theory going into this was “are people just driving or biking more?”\nDuring COVID, one of the many items to find their demand skyrocket were used cars.\nHere’s a news report from ABC 7 NY at the time, for example.\nSo, did the number of cars in NYC increase that much?\n\nThis graph shows that while yes, vehicle ownership did increase in at least 3 of the 4 boroughs of interest in this time frame, it’s not a significant enough margin to really explain the dip in ridership on the Subway.\nThe other form of transit reviewed was biking.\nAccording to one source (NYC DOT on NYC Open Data), biking seems to be down in the city, at least at the popularly monitored locations of the DOT."
  },
  {
    "objectID": "index.html#what-else",
    "href": "index.html#what-else",
    "title": "Metro Mindset",
    "section": "What else?",
    "text": "What else?\nPossible explanations for what might be causing the slow-return to pre-pandemic ridership levels could be due to the surge in remote-work and a sharp decline in tourism.\nWe found analysis from a newspaper The City that seemed to reflect this thinking, though we’ll be discussing remote-work further down as well.\n\n\n\nWork From Home Rates in NYC\n\n\n\nRidership’s slow recovery combined with the MTA’s ever-growing expenses does show a somber tale for the MTA. Fortunately (as discussed below), through funding through projects such as The Capital Program, the MTA will remain funded and growing for the foreseeable future."
  }
]